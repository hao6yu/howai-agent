"use strict";(()=>{var e={};e.id=280,e.ids=[280],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5817:(e,r,o)=>{o.r(r),o.d(r,{originalPathname:()=>d,patchFetch:()=>g,requestAsyncStorage:()=>u,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>p});var t={};o.r(t),o.d(t,{POST:()=>c});var s=o(9303),n=o(8716),a=o(670),i=o(7070);async function c(e){try{let{query:r}=await e.json();if(!r)return i.NextResponse.json({error:"Search query is required"},{status:400});let o=process.env.GOOGLE_API_KEY,t=process.env.GOOGLE_CSE_ID;if(!o||!t)return console.warn("Google API key or CSE ID not configured"),i.NextResponse.json({results:[{title:"Web Search Configuration Error",link:"",snippet:"Web search is not properly configured. Google API credentials are missing. Please check your environment variables for GOOGLE_API_KEY and GOOGLE_CSE_ID."}]});try{let e=`https://www.googleapis.com/customsearch/v1?key=${o}&cx=${t}&q=${encodeURIComponent(r)}&num=5`;console.log(`[WebSearch] Searching for: ${r}`);let s=await fetch(e);if(console.log(`[WebSearch] Response status: ${s.status}`),s.ok){let e=await s.json(),r=[];if(e.items&&Array.isArray(e.items))for(let o of(console.log(`[WebSearch] Found ${e.items.length} search results`),e.items))r.push({title:o.title||"",link:o.link||"",snippet:o.snippet||""});else console.log("[WebSearch] No items found in response");return console.log(`[WebSearch] Returning ${r.length} results`),i.NextResponse.json({results:r})}{console.error(`[WebSearch] Request failed: ${s.status}`);let e=await s.text();return console.error(`[WebSearch] Error response: ${e}`),i.NextResponse.json({results:[{title:"Google Search API Error",link:"",snippet:`Google Search API returned error ${s.status}. Please check your API configuration.`}]})}}catch(e){return console.error("[WebSearch] Search request failed:",e),i.NextResponse.json({results:[{title:"Google Search Network Error",link:"",snippet:`Network error occurred while searching: ${e}`}]})}}catch(e){return console.error("Web search API error:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/search/route",pathname:"/api/search",filename:"route",bundlePath:"app/api/search/route"},resolvedPagePath:"/Users/haoyu/development/HaoGPT/haogpt-web/src/app/api/search/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:u,staticGenerationAsyncStorage:p,serverHooks:h}=l,d="/api/search/route";function g(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:p})}}};var r=require("../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e),t=r.X(0,[948,972],()=>o(5817));module.exports=t})();