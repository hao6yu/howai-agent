"use strict";(()=>{var e={};e.id=905,e.ids=[905],e.modules={2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},3873:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>b,patchFetch:()=>h,requestAsyncStorage:()=>d,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var r={};s.r(r),s.d(r,{GET:()=>p,POST:()=>l});var a=s(9303),o=s(8716),n=s(670),i=s(7070),u=s(6943);async function p(){try{let e=(0,u.e)(),t=[],{error:s}=await e.from("profiles").select("id").limit(1);t.push({table:"profiles",exists:!s,error:s?.message});let{error:r}=await e.from("conversations").select("id, is_pinned").limit(1);t.push({table:"conversations",exists:!r,error:r?.message,has_is_pinned:!r});let{error:a}=await e.from("messages").select("id").limit(1);t.push({table:"messages",exists:!a,error:a?.message});let o=t.every(e=>e.exists);return i.NextResponse.json({status:o?"ready":"needs_setup",checks:t,message:o?"Database is ready for use":"Database tables need to be created. Please run the database-schema.sql in your Supabase SQL editor."})}catch(e){return console.error("Database check error:",e),i.NextResponse.json({status:"error",error:"Failed to check database status",message:"Please ensure your Supabase connection is working"},{status:500})}}async function l(){return i.NextResponse.json({status:"info",message:"Please run the updated database-schema.sql in your Supabase SQL editor to add the is_pinned column to conversations table."})}let c=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/setup-db/route",pathname:"/api/setup-db",filename:"route",bundlePath:"app/api/setup-db/route"},resolvedPagePath:"/Users/haoyu/development/HaoGPT/haogpt-web/src/app/api/setup-db/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:x}=c,b="/api/setup-db/route";function h(){return(0,n.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},6943:(e,t,s)=>{s.d(t,{e:()=>o});var r=s(6718),a=s(1615);function o(){let e=(0,a.cookies)();return(0,r.createServerClient)("https://yjxoreszkpdealtzyvyu.supabase.co","sb_publishable_NvluG8lAmJXglB0qQRwGRg_bPzYdvDP",{cookies:{getAll:()=>e.getAll(),setAll(t){try{t.forEach(({name:t,value:s,options:r})=>e.set(t,s,r))}catch{}}}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,972,305],()=>s(3873));module.exports=r})();